enum ActivityType {
  TASK_CREATED
  TASK_ASSIGNED
  WORKFLOW_STATE_UPDATED
  COMMENT_ADDED
}

model ActivityLog {
  id          String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  taskId      String       @db.Uuid
  task        Task         @relation(fields: [taskId], references: [id], onDelete: Cascade)
  workspaceId String       @db.VarChar(32)
  type        ActivityType
  details     Json         @db.JsonB
  userId      String       @db.Uuid
  userType    AssigneeType
  createdAt   DateTime     @default(now()) @db.Timestamptz()
  deletedAt   DateTime?

  /// taskId index to freqently access a list of activity logs for a given task
  @@index([taskId], name: "IX_ActivityLogs_taskId")
  @@map("ActivityLogs")
}
