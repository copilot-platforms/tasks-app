model TaskTemplate {
  id              String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  workspaceId     String        @db.VarChar(32)
  title           String        @db.VarChar(255)
  body            String?
  workflowState   WorkflowState @relation(fields: [workflowStateId], references: [id], onDelete: Cascade)
  workflowStateId String        @db.Uuid

  //subTaskTemplates
  parentId          String?         @db.Uuid
  parent            TaskTemplate?   @relation("TaskTemplateHierarchy", fields: [parentId], references: [id], onDelete: Cascade)
  subTaskTemplates  TaskTemplate[]  @relation("TaskTemplateHierarchy")

  createdById String    @db.Uuid
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?

  scrapMedias ScrapMedia[]

  @@unique([title, workspaceId, deletedAt], name: "UQ_TaskTemplates_title_workspaceId_deletedAt")
  @@index([workspaceId, parentId, createdAt(sort: Desc)])
  @@map("TaskTemplates")
}
